{
	"info": {
		"_postman_id": "food-backend-problemdetail-tests",
		"name": "Food Backend - ProblemDetail Tests",
		"description": "Collection para testar todos os cenários de erro com ProblemDetail (RFC 7807).\n\n**Configuração:**\n- Base URL local: http://localhost:8080\n- Base URL Docker: http://localhost:8081\n\nAjuste a variável 'base_url' conforme sua forma de execução.\n\n**Ordem recomendada:**\n1. Criar usuário (POST /v1/users)\n2. Fazer login (POST /auth/login)\n3. Testar endpoints protegidos",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0. Autenticação",
			"item": [
				{
					"name": "POST - Login (sucesso)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Autentica um usuário e cria uma sessão HTTP. PRÉ-REQUISITO: Criar um usuário primeiro com login 'joaosilva' e senha 'senha123'"
					},
					"response": []
				},
				{
					"name": "POST - Login (usuário não encontrado)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"usuario_inexistente\",\n  \"password\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Testa login com usuário inexistente - deve retornar 404"
					},
					"response": []
				},
				{
					"name": "POST - Login (senha incorreta)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"senha_errada\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Testa login com senha incorreta - deve retornar 404"
					},
					"response": []
				},
				{
					"name": "POST - Login (validação - login vazio)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"\",\n  \"password\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Testa validação - campo login vazio"
					},
					"response": []
				},
				{
					"name": "POST - Login (validação - senha vazia)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Testa validação - campo senha vazio"
					},
					"response": []
				},
				{
					"name": "POST - Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["auth", "logout"]
						},
						"description": "Encerra a sessão do usuário autenticado. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Acesso não autorizado (sem login)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa acesso a endpoint protegido sem autenticação - deve retornar 401"
					},
					"response": []
				},
				{
					"name": "GET - Acesso não autorizado (após logout)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa acesso a endpoint protegido após logout - deve retornar 401. PRÉ-REQUISITO: Fazer login e depois logout"
					},
					"response": []
				}
			],
			"description": "Endpoints e testes relacionados à autenticação"
		},
		{
			"name": "1. ResourceNotFoundException (404)",
			"item": [
				{
					"name": "GET - Buscar usuário por ID inexistente",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/99999",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "99999"]
						},
						"description": "Testa ResourceNotFoundException - usuário não encontrado por ID"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por login inexistente",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/login?login=login_inexistente",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "login"],
							"query": [
								{
									"key": "login",
									"value": "login_inexistente"
								}
							]
						},
						"description": "Testa ResourceNotFoundException - usuário não encontrado por login"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por email inexistente",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/email?email=email_inexistente@teste.com",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "email"],
							"query": [
								{
									"key": "email",
									"value": "email_inexistente@teste.com"
								}
							]
						},
						"description": "Testa ResourceNotFoundException - usuário não encontrado por email"
					},
					"response": []
				},
				{
					"name": "PUT - Atualizar usuário inexistente",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/99999",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "99999"]
						},
						"description": "Testa ResourceNotFoundException ao atualizar usuário inexistente"
					},
					"response": []
				},
				{
					"name": "DELETE - Deletar usuário inexistente",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/99999",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "99999"]
						},
						"description": "Testa ResourceNotFoundException ao deletar usuário inexistente"
					},
					"response": []
				},
				{
					"name": "PATCH - Alterar senha usuário inexistente",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"senha123\",\n  \"newPassword\": \"novasenha456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/99999/password",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "99999", "password"]
						},
						"description": "Testa ResourceNotFoundException ao alterar senha de usuário inexistente"
					},
					"response": []
				}
			],
			"description": "Cenários que devem retornar 404 - Resource Not Found"
		},
		{
			"name": "2. DomainValidationException (400)",
			"item": [
				{
					"name": "POST - Criar usuário com email duplicado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Maria Santos\",\n  \"email\": \"teste@email.com\",\n  \"login\": \"mariasantos\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"456\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa DomainValidationException - email já cadastrado. PRÉ-REQUISITO: Criar um usuário primeiro com este email"
					},
					"response": []
				},
				{
					"name": "PATCH - Alterar senha (senha atual = nova senha)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"senha123\",\n  \"newPassword\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}/password",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}", "password"]
						},
						"description": "Testa DomainValidationException - senha atual igual à nova senha"
					},
					"response": []
				}
			],
			"description": "Cenários que devem retornar 400 - Domain Validation Error"
		},
		{
			"name": "3. MethodArgumentNotValidException (400)",
			"item": [
				{
					"name": "POST - Criar usuário (name vazio)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"\",\n  \"email\": \"teste@email.com\",\n  \"login\": \"teste\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa validação - campo name vazio"
					},
					"response": []
				},
				{
					"name": "POST - Criar usuário (email inválido)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\",\n  \"email\": \"email-invalido\",\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa validação - formato de email inválido"
					},
					"response": []
				},
				{
					"name": "POST - Criar usuário (senha muito curta)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\",\n  \"email\": \"joao@email.com\",\n  \"login\": \"joaosilva\",\n  \"password\": \"123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa validação - senha com menos de 6 caracteres"
					},
					"response": []
				},
				{
					"name": "POST - Criar usuário (múltiplos campos inválidos)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"\",\n  \"email\": \"\",\n  \"login\": \"\",\n  \"password\": \"123\",\n  \"type\": null\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa validação - múltiplos campos inválidos ao mesmo tempo"
					},
					"response": []
				},
				{
					"name": "POST - Criar usuário (body vazio)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa validação - body vazio"
					},
					"response": []
				},
				{
					"name": "PUT - Atualizar usuário (name vazio)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}"]
						},
						"description": "Testa validação - campo name vazio na atualização"
					},
					"response": []
				},
				{
					"name": "PATCH - Alterar senha (campos vazios)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"\",\n  \"newPassword\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}/password",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}", "password"]
						},
						"description": "Testa validação - campos de senha vazios"
					},
					"response": []
				},
				{
					"name": "PATCH - Alterar senha (nova senha muito curta)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"senha123\",\n  \"newPassword\": \"123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}/password",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}", "password"]
						},
						"description": "Testa validação - nova senha com menos de 6 caracteres"
					},
					"response": []
				}
			],
			"description": "Cenários que devem retornar 400 - Validation Error"
		},
		{
			"name": "4. Novos Tratamentos de Erro",
			"item": [
				{
					"name": "POST - JSON malformado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\",\n  \"email\": \"joao@email.com\",\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\"\n  \"address\": {}\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa HttpMessageNotReadableException - JSON malformado"
					},
					"response": []
				},
				{
					"name": "POST - Body vazio quando obrigatório",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa HttpMessageNotReadableException - body vazio quando obrigatório"
					},
					"response": []
				},
				{
					"name": "GET - Parâmetro login faltando",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/login",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "login"]
						},
						"description": "Testa MissingServletRequestParameterException - parâmetro login faltando"
					},
					"response": []
				},
				{
					"name": "GET - Parâmetro email faltando",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/email",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "email"]
						},
						"description": "Testa MissingServletRequestParameterException - parâmetro email faltando"
					},
					"response": []
				},
				{
					"name": "GET - ID com tipo inválido (string)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/abc",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "abc"]
						},
						"description": "Testa MethodArgumentTypeMismatchException - ID deve ser Long, não string"
					},
					"response": []
				},
				{
					"name": "PUT - ID com tipo inválido",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/xyz",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "xyz"]
						},
						"description": "Testa MethodArgumentTypeMismatchException - ID inválido"
					},
					"response": []
				},
				{
					"name": "POST - Método HTTP não suportado (tentar POST em GET)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/search/name?name=teste",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "name"],
							"query": [
								{
									"key": "name",
									"value": "teste"
								}
							]
						},
						"description": "Testa HttpRequestMethodNotSupportedException - POST não é suportado em /search/name (apenas GET)"
					},
					"response": []
				},
				{
					"name": "POST - Content-Type não suportado (XML)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/xml"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<user><name>João</name></user>"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Testa HttpMediaTypeNotSupportedException - Content-Type XML não suportado"
					},
					"response": []
				},
				{
					"name": "PUT - Content-Type não suportado (text/plain)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "text/plain"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "name=João"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/1",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "1"]
						},
						"description": "Testa HttpMediaTypeNotSupportedException - Content-Type text/plain não suportado"
					},
					"response": []
				},
				{
					"name": "GET - Endpoint inexistente",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/inexistente/rota",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "inexistente", "rota"]
						},
						"description": "Testa NoHandlerFoundException - endpoint que não existe"
					},
					"response": []
				},
				{
					"name": "POST - Endpoint inexistente",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/rota/que/nao/existe",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "rota", "que", "nao", "existe"]
						},
						"description": "Testa NoHandlerFoundException - endpoint que não existe"
					},
					"response": []
				}
			],
			"description": "Cenários para novos tratamentos de erro implementados"
		},
		{
			"name": "5. Casos de Sucesso",
			"item": [
				{
					"name": "POST - Criar usuário válido (público)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva\",\n  \"email\": \"joao@email.com\",\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"number\": \"123\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Cria um usuário válido para usar nos outros testes"
					},
					"response": []
				},
				{
					"name": "POST - Login (antes de acessar endpoints protegidos)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Faz login para criar sessão antes de acessar endpoints protegidos. PRÉ-REQUISITO: Criar usuário primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Listar todos os usuários",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users",
							"host": ["{{base_url}}"],
							"path": ["v1", "users"]
						},
						"description": "Lista todos os usuários cadastrados. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}"]
						},
						"description": "Busca um usuário específico por ID. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por nome",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/name?name=João",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "name"],
							"query": [
								{
									"key": "name",
									"value": "João",
									"description": "Nome do usuário para buscar (opcional - se não fornecido, retorna todos)"
								}
							]
						},
						"description": "Busca usuários por nome (retorna lista). O parâmetro 'name' é OPCIONAL - se não fornecido, retorna todos os usuários. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Buscar todos os usuários (sem parâmetro name)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/name",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "name"]
						},
						"description": "Busca todos os usuários quando o parâmetro name não é fornecido. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por login",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/login?login=joaosilva",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "login"],
							"query": [
								{
									"key": "login",
									"value": "joaosilva",
									"description": "Login do usuário para buscar"
								}
							]
						},
						"description": "Busca um usuário específico por login. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "GET - Buscar usuário por email",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/search/email?email=joao@email.com",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "search", "email"],
							"query": [
								{
									"key": "email",
									"value": "joao@email.com",
									"description": "Email do usuário para buscar"
								}
							]
						},
						"description": "Busca um usuário específico por email. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "PUT - Atualizar usuário",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"João Silva Atualizado\",\n  \"address\": {\n    \"street\": \"Rua Nova\",\n    \"number\": \"456\",\n    \"city\": \"Rio de Janeiro\",\n    \"zipCode\": \"20000-000\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}"]
						},
						"description": "Atualiza informações do usuário (exceto senha). PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "PATCH - Alterar senha",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"senha123\",\n  \"newPassword\": \"novasenha456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}/password",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}", "password"]
						},
						"description": "Altera a senha do usuário. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				},
				{
					"name": "DELETE - Deletar usuário",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["v1", "users", "{{user_id}}"]
						},
						"description": "Deleta um usuário. PRÉ-REQUISITO: Fazer login primeiro"
					},
					"response": []
				}
			],
			"description": "Casos de sucesso para referência"
		},
		{
			"name": "6. Endpoints V2 - JWT Authentication",
			"item": [
				{
					"name": "6.1 Autenticação V2",
					"item": [
						{
							"name": "POST - Login V2 (sucesso)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    var jsonData = pm.response.json();",
											"    pm.collectionVariables.set(\"jwt_token\", jsonData.token);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"senha123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/auth/login",
									"host": ["{{base_url}}"],
									"path": ["v2", "auth", "login"]
								},
								"description": "Autentica um usuário e retorna JWT token. O token é salvo automaticamente na variável jwt_token. PRÉ-REQUISITO: Criar um usuário primeiro com login 'joaosilva' e senha 'senha123'"
							},
							"response": []
						},
						{
							"name": "POST - Login V2 (usuário não encontrado)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"login\": \"usuario_inexistente\",\n  \"password\": \"senha123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/auth/login",
									"host": ["{{base_url}}"],
									"path": ["v2", "auth", "login"]
								},
								"description": "Testa login v2 com usuário inexistente - deve retornar 404 com ProblemDetail"
							},
							"response": []
						},
						{
							"name": "POST - Login V2 (senha incorreta)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"login\": \"joaosilva\",\n  \"password\": \"senha_errada\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/auth/login",
									"host": ["{{base_url}}"],
									"path": ["v2", "auth", "login"]
								},
								"description": "Testa login v2 com senha incorreta - deve retornar 404 com ProblemDetail"
							},
							"response": []
						},
						{
							"name": "GET - Acesso não autorizado V2 (sem token)",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Testa acesso a endpoint v2 protegido sem JWT token - deve retornar 401 com ProblemDetail"
							},
							"response": []
						},
						{
							"name": "GET - Acesso não autorizado V2 (token inválido)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer token_invalido_12345"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Testa acesso a endpoint v2 protegido com token JWT inválido - deve retornar 401 com ProblemDetail"
							},
							"response": []
						},
						{
							"name": "POST - Logout V2 (sucesso)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/auth/logout",
									"host": ["{{base_url}}"],
									"path": ["v2", "auth", "logout"]
								},
								"description": "Faz logout do usuário. O cliente deve descartar o token após o logout. Como JWT é stateless, o token permanece válido até expirar. PRÉ-REQUISITO: Fazer login v2 primeiro para obter o token"
							},
							"response": []
						},
						{
							"name": "POST - Logout V2 (sem token - erro 401)",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/v2/auth/logout",
									"host": ["{{base_url}}"],
									"path": ["v2", "auth", "logout"]
								},
								"description": "Testa logout v2 sem token JWT - deve retornar 401 com ProblemDetail"
							},
							"response": []
						}
					],
					"description": "Endpoints e testes relacionados à autenticação V2 com JWT"
				},
				{
					"name": "6.2 Casos de Sucesso V2",
					"item": [
						{
							"name": "POST - Criar usuário V2 (público)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Maria Santos\",\n  \"email\": \"maria@email.com\",\n  \"login\": \"mariasantos\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\",\n  \"address\": {\n    \"street\": \"Rua V2\",\n    \"number\": \"789\",\n    \"city\": \"São Paulo\",\n    \"zipCode\": \"01234-567\"\n  }\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Cria um usuário válido no endpoint v2 (público, não requer JWT)"
							},
							"response": []
						},
						{
							"name": "GET - Listar todos os usuários V2",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Lista todos os usuários usando JWT token. PRÉ-REQUISITO: Fazer login v2 primeiro para obter o token"
							},
							"response": []
						},
						{
							"name": "GET - Buscar usuário por ID V2",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users/{{user_id}}",
									"host": ["{{base_url}}"],
									"path": ["v2", "users", "{{user_id}}"]
								},
								"description": "Busca um usuário específico por ID usando JWT token. PRÉ-REQUISITO: Fazer login v2 primeiro"
							},
							"response": []
						},
						{
							"name": "GET - Buscar usuários por nome V2",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users/search/name?name=Maria",
									"host": ["{{base_url}}"],
									"path": ["v2", "users", "search", "name"],
									"query": [
										{
											"key": "name",
											"value": "Maria",
											"description": "Nome do usuário para buscar (opcional - se não fornecido, retorna todos)"
										}
									]
								},
								"description": "Busca usuários por nome usando JWT token. O parâmetro 'name' é OPCIONAL - se não fornecido, retorna todos os usuários. PRÉ-REQUISITO: Fazer login v2 primeiro"
							},
							"response": []
						},
						{
							"name": "GET - Buscar todos os usuários V2 (sem parâmetro name)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users/search/name",
									"host": ["{{base_url}}"],
									"path": ["v2", "users", "search", "name"]
								},
								"description": "Busca todos os usuários quando o parâmetro name não é fornecido (V2 com JWT). PRÉ-REQUISITO: Fazer login v2 primeiro"
							},
							"response": []
						},
						{
							"name": "PUT - Atualizar usuário V2",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Maria Santos Atualizada\",\n  \"address\": {\n    \"street\": \"Rua Nova V2\",\n    \"number\": \"999\",\n    \"city\": \"Rio de Janeiro\",\n    \"zipCode\": \"20000-000\"\n  }\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/users/{{user_id}}",
									"host": ["{{base_url}}"],
									"path": ["v2", "users", "{{user_id}}"]
								},
								"description": "Atualiza informações do usuário usando JWT token. PRÉ-REQUISITO: Fazer login v2 primeiro"
							},
							"response": []
						}
					],
					"description": "Casos de sucesso para endpoints V2 com JWT"
				},
				{
					"name": "6.3 Erros V2 (ProblemDetail)",
					"item": [
						{
							"name": "GET - Usuário inexistente V2",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/v2/users/99999",
									"host": ["{{base_url}}"],
									"path": ["v2", "users", "99999"]
								},
								"description": "Testa ResourceNotFoundException v2 - deve retornar 404 com ProblemDetail. PRÉ-REQUISITO: Fazer login v2 primeiro"
							},
							"response": []
						},
						{
							"name": "POST - Criar usuário V2 (email duplicado)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Teste Duplicado\",\n  \"email\": \"maria@email.com\",\n  \"login\": \"testeduplicado\",\n  \"password\": \"senha123\",\n  \"type\": \"CUSTOMER\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Testa DomainValidationException v2 - email duplicado. PRÉ-REQUISITO: Criar usuário primeiro com este email"
							},
							"response": []
						},
						{
							"name": "POST - Criar usuário V2 (validação - campos inválidos)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"\",\n  \"email\": \"email-invalido\",\n  \"login\": \"\",\n  \"password\": \"123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v2/users",
									"host": ["{{base_url}}"],
									"path": ["v2", "users"]
								},
								"description": "Testa MethodArgumentNotValidException v2 - múltiplos campos inválidos - deve retornar 400 com ProblemDetail"
							},
							"response": []
						}
					],
					"description": "Cenários de erro para endpoints V2 - todos retornam ProblemDetail (RFC 7807)"
				}
			],
			"description": "Endpoints V2 com autenticação JWT - Todos os erros retornam ProblemDetail (RFC 7807)"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		}
	]
}
